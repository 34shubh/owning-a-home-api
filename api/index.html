<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <title>API endpoints - Owning-a-home API</title>
    
    

    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/syntax.css">
    

    <style type="text/css">
        
        .sidebar-nav a:hover,
        .sidebar-nav a:focus,
        .sidebar-nav a:active,
        .sidebar-nav a.sidebar-nav-active {
            border-left-color: #2CB34A;
        }
        header {
            border-bottom-color: #2CB34A;
        }
        
        
    </style>


    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <script src="../js/respond.min.js"></script>
    <![endif]--> 
</head>

<body>

    <div class="container">
        <header role="banner">
            <div class="wrap">
                
                <img class="logo" src="https://cfpb.github.io/img/logo_210.png" alt="Consumer Financial Protection Bureau">
                
                <h1 class="site-title"><a class="title-link" href="../">Owning-a-home API</a></h1>
            </div>
        </header>

        <div class="wrap content">
            <aside>
                <nav class="sidebar-nav" role="navigation">
                    <ul>
                        
                        <li>
                            
                            <a href=".." class="">Introduction</a>

                            
                        </li>
                        
                        <li>
                            
                            <span>Usage</span>
                            <ul class="secondary-nav">
                                
                                <li>
                                    <a href="./" class="sidebar-nav-active">API endpoints</a>
                                </li>
                                
                            </ul>
                            
                        </li>
                        
                    </ul>
                </nav>
            </aside>

            <section id="main" class="main-content" role="main">
                <h1 id="api-endpoints">API endpoints</h1>
<p>The Owning-a-home API includes three modules:</p>
<h4 id="ratechecker">ratechecker</h4>
<p>This app exposes two API endpoints, <code>/oah-api/rates/rate-checker</code> and
<code>/oah-api/rates/rate-checker-fees</code>, with the following parameters:</p>
<table>
<thead>
<tr>
<th>Param name</th>
<th>Description</th>
<th align="center">Required</th>
<th align="right">Default value</th>
<th align="left">Acceptable values<br>(values = description)</th>
</tr>
</thead>
<tbody>
<tr>
<td>arm_type</td>
<td>The type of ARM</td>
<td align="center">No, unless rate_structure=arm</td>
<td align="right">N/A</td>
<td align="left">3-1 = 3/1 ARM,<br>5-1 = 5/1 ARM,<br>7-1 = 7/1 ARM,<br>10-1 = 10/1 ARM</td>
</tr>
<tr>
<td>institution</td>
<td>The institution name</td>
<td align="center">No</td>
<td align="right">N/A</td>
<td align="left"><em>any valid institution name</em>, for ex. BANKA, BANKB, etc.</td>
</tr>
<tr>
<td>io</td>
<td>Interest only flag -- only applicable to ARM loans</td>
<td align="center">No</td>
<td align="right">0</td>
<td align="left">0 = false,<br>1 = true,<br>blank</td>
</tr>
<tr>
<td>loan_amount</td>
<td>The amount of the loan</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left"><em>any positive integer</em></td>
</tr>
<tr>
<td>loan_purpose</td>
<td>The purpose of the loan</td>
<td align="center">No</td>
<td align="right">PURCH</td>
<td align="left">PURCH = New Purchase,<br>REFI = Refinance</td>
</tr>
<tr>
<td>loan_term</td>
<td>The loan term (years)</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left">30, 15</td>
</tr>
<tr>
<td>loan_type</td>
<td>The type of loan</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left">JUMBO = Jumbo Loan,<br>CONF = Conventional Loan,<br>AGENCY = Agency Loan,<br>FHA = Federal Housing Administration Loan,<br>VA = Veteran Affairs Loan,<br>VA-HB = Veteran Affairs High Balance Loan,<br>FHA-HB = Federal Housing Administration High Balance Loan</td>
</tr>
<tr>
<td>lock</td>
<td>Rate lock period</td>
<td align="center">No</td>
<td align="right">60</td>
<td align="left">Typically, 30, 45, or 60.<br>One lender in the database has non-standard rate lock periods, so the code converts a single number to a range: &lt;= 30; &gt;30 and &lt;=45; &gt;45 and &lt;= 60 respectively</td>
</tr>
<tr>
<td>ltv <a href="#1">*1</a></td>
<td>Loan to value</td>
<td align="center">No</td>
<td align="right">N/A</td>
<td align="left">Calculated by dividing the loan amount by the house price</td>
</tr>
<tr>
<td>maxfico</td>
<td>The maximum FICO score</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left">0 - 850.<br>In practice, &lt;600 will return no results.  For optimal functioning, MinFICO and MaxFICO should be coordinated.  Either, they should be the same value, thereby providing a point estimate of the FICO score, or they should be configured to provide a 20-point range, eg, 700-719.  Ranges should be specified to start on an even 20 multiple and end on a 19, 39, 59, etc., except for the top bucket which is 840-850.</td>
</tr>
<tr>
<td>minfico</td>
<td>The minimum FICO score</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left">0 - 850,<br>see maxfico for more info.</td>
</tr>
<tr>
<td>points</td>
<td>Points</td>
<td align="center">No</td>
<td align="right">0</td>
<td align="left">This number is used as the centroid of a range, +/- 0.5, to constrain the results. Input could be any decimal roughly within -4 to +4, but in practice anything outside of -2 to +3 is likely to have few results.</td>
</tr>
<tr>
<td>price</td>
<td>The price of the property</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left"><em>In general, should be larger than the loan_amount.</em></td>
</tr>
<tr>
<td>property_type</td>
<td>The property type</td>
<td align="center">No</td>
<td align="right">SF</td>
<td align="left">SF = Single Family;<br>CONDO = Condominium;<br>COOP = Housing Cooperative (co-op)</td>
</tr>
<tr>
<td>rate_structure</td>
<td>The rate structure of the loan</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left">FIXED = Fixed Rate,<br>ARM = Adjusted Rate Mortgage</td>
</tr>
<tr>
<td>state</td>
<td>The US state</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="left"><em>all the US state's abbreviations</em></td>
</tr>
</tbody>
</table>
<p><span id="1">*1</span>: We actually calculate its value and don't check the value sent in request</p>
<p>The ratechecker will return a JSON object containing <code>data</code> and <code>timestamp</code>. It will also contain
a <code>fees</code> field when requesting <code>/oah-api/rates/rate-checker-fees</code>.</p>
<p>The <code>timestamp</code> will be <code>null</code> if a timestamp can't be found, which could happen if a request is made just as tables are being updated.</p>
<p>ratechecker has a management command, <code>load_daily_data</code>, which loads daily interest rate data from CSV.</p>
<h4 id="countylimits">countylimits</h4>
<p>This app exposes a single API endpoint, <code>/oah-api/county</code>, which requires a <code>state</code> parameter for querying Federal Housing Administration loan lending limit, Government-Sponsored Enterprises mortgage loan limit and the Department of Veterans Affairs loan guaranty program limit for the counties in a given state.</p>
<table>
<thead>
<tr>
<th>Param name</th>
<th>Description</th>
<th align="center">Required</th>
<th align="right">Default value</th>
<th align="right">Acceptable values</th>
</tr>
</thead>
<tbody>
<tr>
<td>state</td>
<td>The US state</td>
<td align="center">Yes</td>
<td align="right">N/A</td>
<td align="right"><em>all the US state's abbreviations</em> or <em>fips codes</em></td>
</tr>
</tbody>
</table>
<p>countylimits will return a JSON object containing <code>state</code>, <code>county</code>, <code>complete_fips</code>, <code>gse_limit</code>, <code>fha_limit</code>, and <code>va_limit</code>.</p>
<p>countylimits has a management command, <code>load_county_limits</code>, that loads these limits from a CSV file. Source CSVs are stored in the /data directory. The latest version is <a href="https://github.com/cfpb/owning-a-home-api/blob/master/data/2017/2017_amended.csv">data/2017/2017_amended.csv</a>.</p>
<p>The <code>load_county_limits</code> command takes two arguments to fully run: file path and <code>--confirm=y</code></p>
<p>So the full command to load the data for 2017 was:</p>
<pre><code>python manage.py load_county_limits data/2017/2017_amended.csv --confirm=y
</code></pre>

<p>The command deletes all State, County and CountyLimit objects and reloads them.</p>
<p>See <code>/data/2017/README.md</code> for details about the 2017 data.</p>
<p>Countylimit data updates normally occur in late December. After an update is loaded and tested, we export it as a fixture for testing, and as a local loading option. We use this command to update the fixture:</p>
<pre><code>python manage.py dumpdata countylimits --indent=4 &gt; countylimits/fixtures/countylimit_data.json
</code></pre>

<p>And it can be loaded locally with:</p>
<pre><code>python manage.py loaddata countylimit_data.json
</code></pre>

<p>Our standard loading path on servers is to use the <code>load_county_limits</code> management command.</p>
            </section>
        </div>

        <footer role="contentinfo">
            <div class="wrap">
                This project is maintained by <a href="https://cfpb.github.io">The Consumer Financial Protection Bureau</a>.

                <p>Hosted on <a href="http://pages.github.com/">GitHub Pages</a>.</p>
            </div>
        </footer>
    </div>
</body>
</html>
